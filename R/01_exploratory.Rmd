---
title: "Exploratory analysis"
author: "Sergio Picart-Armada"
date: "5/2/2020"
output: ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r}
library(data.table)
```


# Annotations

```{r}
# download https://drive.google.com/uc?id=1_msEbSh_YZr0NLSR_DJ_xWE9FlqBlMV9&export=download
# and deflate just the tsv files 
# (the images take up a lot of space)
prot.dom <- fread("data-raw/dpid_dom.tsv")
dim(prot.dom)
summary(prot.dom)
head(prot.dom$`Domain Features`)

prot.seq <- fread("data-raw/dpid_seq.tsv")
dim(prot.seq)

# cpd.fp <- fread("data-raw/dcid_fingerprint.tsv")
tab.ec50 <- fread("data-raw/EC50_protein_compound_pair.tsv")
dim(tab.ec50)
head(tab.ec50)
```

```{r}
read_prediction <- function(file) {
    tab <- fread(file)
    tab[, lapply(.SD, gsub, 
                 pattern = "(b')(.+)(')", 
                 replacement = "\\2")]
}
```


# Predictions

```{r}
df.pred <- read_prediction("predictions/level_1/0/test_predictions.csv")

head(df.pred)
    ```


## R Markdown

This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.

## Slide with Bullets

- Bullet 1
- Bullet 2
- Bullet 3

## Slide with R Output

```{r cars, echo = TRUE}
summary(cars)
```

## Slide with Plot

```{r pressure}
plot(pressure)
```

